import{d as C,r as u,k as w,a as E,o as h,l as k,y as o,b as t,e as s,$ as D,w as a,a3 as T,a0 as y,v as x,a1 as S,F as g,a7 as z,G as B,p as m,L as i,V as L,A,q as b,W as P,a6 as V}from"./vendor.c80ffa44.js";import{i as p,b as M}from"./index.7ef7a7b6.js";const $={class:"list-page"},q={class:"header"},I={class:"title n-ellipsis"},U=m("\u56DE\u6536\u7AD9"),j={key:0,class:"outer-wrapper static show"},G={class:"toolbar-wrapper"},R=m(" \u8FD8\u539F\u6240\u9009 "),H=m(" \u5220\u9664\u6240\u9009 "),X=C({setup(K){const f=u(),r=u([]),N=u([{type:"selection"},{title:"\u540D\u79F0",key:"name",sorter:"default",render:e=>i("div",{class:"file-info"},[i("img",{src:e.thumbnail_link||e.icon_link}),i(L,{class:"title"},{default:()=>String(e.name)}),i("span",{class:"action"},"1")])},{title:"\u5220\u9664\u65F6\u95F4",key:"modified_time",sorter:"default",render:e=>i(A,{time:new Date(String(e.delete_time)||""),format:"MM-dd hh:mm"}),className:"modified_time",width:200},{title:"\u5927\u5C0F",key:"size",sorter:"default",render:e=>Number(e.size)>0?M(Number(e.size)):"",className:"size",width:160},{title:"\u64CD\u4F5C",key:"action",width:90,align:"right",render:e=>i(V,{},{default:()=>[i(b,{type:"primary",onClick:()=>{v(String(e.id))}},{default:()=>"\u8FD8\u539F"}),i(P,{placement:"right",onPositiveClick:()=>{_(String(e.id))}},{trigger:()=>i(b,{type:"primary"},{default:()=>"\u5220\u9664"}),default:()=>"\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u5417\uFF1F"})]})}]),d=u(!1),c=()=>{d.value=!0,p.get("https://api-drive.mypikpak.com/drive/v1/files",{params:{parent_id:"*",thumbnail_size:"SIZE_LARGE",with_audit:!0,filters:{phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!0}}}}).then(e=>{const{data:l}=e;f.value=l.files}).finally(()=>{d.value=!1})},_=e=>{p.post("https://api-drive.mypikpak.com/drive/v1/files:batchDelete",{ids:typeof e=="string"?[e]:e}).then(()=>{window.$message.success("\u5220\u9664\u6210\u529F"),c()})},v=e=>{p.post("https://api-drive.mypikpak.com/drive/v1/files:batchUntrash",{ids:typeof e=="string"?[e]:e}).then(()=>{c()})};return w(c),(e,l)=>{const F=E("router-link");return h(),k("div",$,[o("div",q,[o("div",I,[t(s(D),{separator:">"},{default:a(()=>[t(s(S),null,{default:a(()=>[t(F,{to:""},{default:a(()=>[U]),_:1})]),_:1})]),_:1})])]),t(s(T),{"checked-row-keys":r.value,"onUpdate:checked-row-keys":l[0]||(l[0]=n=>r.value=n),"row-key":n=>n.id,data:f.value,size:"small",columns:N.value,bordered:!1,loading:d.value},null,8,["checked-row-keys","row-key","data","columns","loading"]),r.value.length?(h(),k("div",j,[o("div",G,[o("div",{class:"toolbar-item",onClick:l[1]||(l[1]=n=>v(r.value))},[t(s(y),null,{trigger:a(()=>[t(s(g),null,{default:a(()=>[t(s(z))]),_:1})]),default:a(()=>[R]),_:1})]),o("div",{class:"toolbar-item",onClick:l[2]||(l[2]=n=>_(r.value))},[t(s(y),null,{trigger:a(()=>[t(s(g),null,{default:a(()=>[t(s(B))]),_:1})]),default:a(()=>[H]),_:1})])])])):x("",!0)])}}});export{X as default};
