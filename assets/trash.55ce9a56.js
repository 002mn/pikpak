import{d as v,r,k as g,a as k,o as y,l as N,x as c,b as a,e as n,Y as b,w as l,Z as F,$ as E,p as C,I as t,U as x,a1 as D,q as m,V as T,a2 as S}from"./vendor.6eb9d6fa.js";import{i as u,b as z}from"./index.a6fa7370.js";const B={class:"list-page"},P={class:"header"},A={class:"title n-ellipsis"},L=C("\u56DE\u6536\u7AD9"),w=v({setup(M){const o=r(),p=r([{title:"\u540D\u79F0",key:"name",sorter:"default",render:e=>t("div",{class:"file-info"},[t("img",{src:e.thumbnail_link||e.icon_link}),t(x,{class:"title"},{default:()=>String(e.name)}),t("span",{class:"action"},"1")])},{title:"\u5220\u9664\u65F6\u95F4",key:"modified_time",sorter:"default",render:e=>t(D,{time:new Date(String(e.delete_time)||""),format:"MM-dd hh:mm"}),className:"modified_time",width:200},{title:"\u5927\u5C0F",key:"size",sorter:"default",render:e=>Number(e.size)>0?z(Number(e.size)):"",className:"size",width:160},{title:"\u64CD\u4F5C",key:"action",width:90,align:"right",render:e=>t(S,{},{default:()=>[t(m,{type:"primary",onClick:()=>{_(String(e.id))}},{default:()=>"\u8FD8\u539F"}),t(T,{placement:"right",onPositiveClick:()=>{f(String(e.id))}},{trigger:()=>t(m,{type:"primary"},{default:()=>"\u5220\u9664"}),default:()=>"\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u5417\uFF1F"})]})}]),s=r(!1),i=()=>{s.value=!0,u.get("https://api-drive.mypikpak.com/drive/v1/files",{params:{parent_id:"*",thumbnail_size:"SIZE_LARGE",with_audit:!0,filters:{phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!0}}}}).then(e=>{const{data:d}=e;o.value=d.files}).finally(()=>{s.value=!1})},f=e=>{u.post("https://api-drive.mypikpak.com/drive/v1/files:batchDelete",{ids:typeof e=="string"?[e]:e}).then(()=>{i()})},_=e=>{u.post("https://api-drive.mypikpak.com/drive/v1/files:batchUntrash",{ids:typeof e=="string"?[e]:e}).then(()=>{i()})};return g(i),(e,d)=>{const h=k("router-link");return y(),N("div",B,[c("div",P,[c("div",A,[a(n(b),{separator:">"},{default:l(()=>[a(n(E),null,{default:l(()=>[a(h,{to:""},{default:l(()=>[L]),_:1})]),_:1})]),_:1})])]),a(n(F),{data:o.value,size:"small",columns:p.value,bordered:!1,loading:s.value},null,8,["data","columns","loading"])])}}});export{w as default};
