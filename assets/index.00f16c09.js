import{d as w,u as U,r as f,a as I,o as g,c as O,w as c,b as a,e as s,N as K,z as G,f as J,g as W,h as Z,i as X,j as Y,k as Q,l as N,m as ee,n as te,p as x,t as C,q as oe,s as se,v as b,x as h,y as S,A as re,B as ae,C as D,D as ne,E as le,F as ie,G as ue,H as ce,I as R,T as de,J as pe,K as me,L as fe,M as he}from"./vendor.f6482a6d.js";const ve=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}};ve();const _e=w({setup(t){return window.$message=U(),(e,i)=>null}}),ge=w({setup(t){const e=f({common:{primaryColor:"#306eff",hoverColor:"#306eff",primaryColorHover:"#306eff",heightMedium:"42px"},Layout:{siderColor:"#f5f5f6"},Breadcrumb:{fontSize:"16px"}});return(i,r)=>{const o=I("router-view");return g(),O(s(W),{locale:s(G),"date-locale":s(J),"theme-overrides":e.value},{default:c(()=>[a(s(K),null,{default:c(()=>[a(_e),a(o)]),_:1})]),_:1},8,["locale","date-locale","theme-overrides"])}}}),ke="modulepreload",T={},ye="/pikpak/",E=function(e,i){return!i||i.length===0?e():Promise.all(i.map(r=>{if(r=`${ye}${r}`,r in T)return;T[r]=!0;const o=r.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${n}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":ke,o||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),o)return new Promise((y,p)=>{u.addEventListener("load",y),u.addEventListener("error",p)})})).then(()=>e())},v=Z.create({});v.interceptors.request.use(t=>{const e=JSON.parse(window.localStorage.getItem("pikpakLogin")||"{}");return(!e||!e.access_token)&&L.push("/login"),t.headers={Authorization:e.token_type+" "+e.access_token},t.url="https://cors.z7.workers.dev/"+t.url,t});v.interceptors.response.use(t=>t,t=>{const{response:e}=t;if(e.status)switch(e.status){case 401:L.push("/login");break;case 400:window.$message.error(e.data.error_description||"\u51FA\u9519\u4E86")}return Promise.reject(t)});const V=function(t){if(isNaN(t))return"";let e=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(2));i<1&&(i=0);let r=Math.floor(i/10);return t=t/Math.pow(2,10*r),t.toString().length>t.toFixed(2).toString().length&&(t=parseFloat(t.toFixed(2))),t+" "+e[r]};const we=h("a",{href:"https://mypikpak.com/",target:"_blank",class:"logo-box"},[h("img",{src:"https://www.mypikpak.com/logo.png",class:"logo-box__icon",alt:""}),h("div",{class:"logo-box__text"},"PikPak")],-1),Ne={key:0,class:"content-bottom"},xe=x("\u4F1A\u5458\u7801"),Ce={key:1,class:"sider-bottom"},be={class:"bottom-user-info"},Ee=h("img",{src:"https://www.mypikpak.com/logo.png",class:"user-info-avatar"},null,-1),Le={class:"user-info-name"},Be=x("\u6DFB\u52A0"),Pe=w({setup(t){const e=f(!1),i=m=>()=>R(D,null,{default:()=>R(m)}),r=X(),o=Y(),n=f([{label:"\u6587\u4EF6",key:"list",icon:i(pe)},{label:"\u56DE\u6536\u7AD9",key:"trash",icon:i(de)}]),u=f(),y=()=>{v.get("https://user.mypikpak.com/v1/user/me").then(m=>{u.value=m.data})},p=f(),B=()=>{v.get("https://api-drive.mypikpak.com/drive/v1/about").then(m=>{p.value=m.data})},q=(m,l)=>{console.log(l),r.push("/"+l.key)};Q(()=>{y(),B()});const k=f(),_=f(!1),z=()=>{v.post("https://api-drive.mypikpak.com/vip/v1/order/free",{activation_code:k.value}).then(m=>{window.$message.success("\u5151\u6362\u6210\u529F"),B()}).finally(()=>{_.value=!1})};return(m,l)=>{const H=I("router-view");return g(),N(ce,null,[a(s(S),{"has-sider":""},{default:c(()=>[a(s(ee),{"content-style":{display:"flex",flexDirection:"column"},"collapse-mode":"width","collapsed-width":0,width:240,"show-trigger":"bar",collapsed:e.value,onCollapse:l[1]||(l[1]=d=>e.value=!0),onExpand:l[2]||(l[2]=d=>e.value=!1),bordered:""},{default:c(()=>{var d,P,F,$,A,M;return[we,a(s(te),{options:n.value,value:String(s(o).name),"onUpdate:value":q},null,8,["options","value"]),e.value?b("",!0):(g(),N("div",Ne,[x(C(s(V)((d=p.value)==null?void 0:d.quota.usage))+" / "+C(s(V)((P=p.value)==null?void 0:P.quota.limit))+" ",1),a(s(oe),{type:"primary",onClick:l[0]||(l[0]=Ae=>_.value=!0)},{default:c(()=>[xe]),_:1}),((F=p.value)==null?void 0:F.quota)?(g(),O(s(se),{key:0,type:"line",percentage:Number(((($=p.value)==null?void 0:$.quota.usage)/((A=p.value)==null?void 0:A.quota.limit)*100).toFixed(2)),"indicator-placement":"inside",height:14,processing:""},null,8,["percentage"])):b("",!0)])),e.value?b("",!0):(g(),N("div",Ce,[h("div",be,[Ee,h("span",Le,C((M=u.value)==null?void 0:M.name),1)])]))]}),_:1},8,["collapsed"]),a(s(S),null,{default:c(()=>[a(s(re),{style:{height:"100vh"}},{default:c(()=>[a(H)]),_:1})]),_:1})]),_:1}),a(s(ue),{show:_.value,"onUpdate:show":l[5]||(l[5]=d=>_.value=d)},{default:c(()=>[a(s(ae),{style:{width:"600px"},title:"\u4F1A\u5458\u7801"},{"header-extra":c(()=>[a(s(D),{onClick:l[3]||(l[3]=d=>_.value=!1)},{default:c(()=>[a(s(ne))]),_:1})]),action:c(()=>[a(s(le),{block:!0,type:"primary",disabled:!k.value,onClick:z},{default:c(()=>[Be]),_:1},8,["disabled"])]),default:c(()=>[a(s(ie),{placeholder:"\u4F1A\u5458\u7801",value:k.value,"onUpdate:value":l[4]||(l[4]=d=>k.value=d)},null,8,["value"])]),_:1})]),_:1},8,["show"])],64)}}}),Fe=[{path:"/",name:"home",component:Pe,redirect:"/list",children:[{path:"list/:id?",name:"list",component:()=>E(()=>import("./list.52e35589.js"),["assets/list.52e35589.js","assets/list.155af851.css","assets/vendor.f6482a6d.js"])},{path:"trash",name:"trash",component:()=>E(()=>import("./trash.07d550dc.js"),["assets/trash.07d550dc.js","assets/trash.1f5dfb16.css","assets/vendor.f6482a6d.js"])}]},{path:"/login",name:"login",component:()=>E(()=>import("./login.d7546950.js"),["assets/login.d7546950.js","assets/login.36e38c6f.css","assets/vendor.f6482a6d.js"])}],$e=me({history:fe(),routes:Fe});var L=$e;const j=he(ge);j.config.globalProperties.$http=v;j.use(L).mount("#app");export{V as b,v as i};
