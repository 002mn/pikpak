import{d as F,r,k as D,a as E,o as k,n as y,C as u,b as t,e as s,a2 as T,w as a,a6 as x,a3 as g,A as S,a4 as z,I as b,aa as B,J as P,t as m,P as i,D as A,Z as L,x as N,_ as I,a9 as M}from"./vendor.794127e5.js";import{i as p,b as V}from"./index.d1e02812.js";const U={class:"list-page"},$={class:"header"},j={class:"title n-ellipsis"},q=m("\u56DE\u6536\u7AD9"),R={key:0,class:"outer-wrapper static show"},Z={class:"toolbar-wrapper"},G=m(" \u8FD8\u539F\u6240\u9009 "),H=m(" \u5220\u9664\u6240\u9009 "),W=F({setup(J){const _=r(),n=r([]),C=r([{title:"\u5220\u9664\u65F6\u95F4",key:"modified_time",sorter:"default",render:e=>i(A,{time:new Date(String(e.delete_time)||""),format:"MM-dd hh:mm"}),className:"modified_time",width:200},{title:"\u5927\u5C0F",key:"size",sorter:"default",render:e=>Number(e.size)>0?V(Number(e.size)):"",className:"size",width:160}]),f=r([{type:"selection"},{title:"\u540D\u79F0",key:"name",sorter:"default",render:e=>i("div",{class:"file-info"},[i("img",{src:e.thumbnail_link||e.icon_link}),i(L,{class:"title"},{default:()=>String(e.name)}),i("span",{class:"action"},"1")])},{title:"\u64CD\u4F5C",key:"action",width:90,align:"right",render:e=>i(M,{},{default:()=>[i(N,{type:"primary",onClick:()=>{v(String(e.id))}},{default:()=>"\u8FD8\u539F"}),i(I,{placement:"right",onPositiveClick:()=>{h(String(e.id))}},{trigger:()=>i(N,{type:"primary"},{default:()=>"\u5220\u9664"}),default:()=>"\u786E\u5B9A\u5220\u9664\u6587\u4EF6\u5417\uFF1F"})]})}]),d=r(!1),c=()=>{d.value=!0,p.get("https://api-drive.mypikpak.com/drive/v1/files",{params:{parent_id:"*",thumbnail_size:"SIZE_LARGE",with_audit:!0,filters:{phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!0}}}}).then(e=>{const{data:l}=e;_.value=l.files}).finally(()=>{d.value=!1})},h=e=>{p.post("https://api-drive.mypikpak.com/drive/v1/files:batchDelete",{ids:typeof e=="string"?[e]:e}).then(()=>{window.$message.success("\u5220\u9664\u6210\u529F"),c()})},v=e=>{p.post("https://api-drive.mypikpak.com/drive/v1/files:batchUntrash",{ids:typeof e=="string"?[e]:e}).then(()=>{c()})};return D(()=>{document.body.clientWidth>968&&f.value.splice(2,0,...C.value),c()}),(e,l)=>{const w=E("router-link");return k(),y("div",U,[u("div",$,[u("div",j,[t(s(T),{separator:">"},{default:a(()=>[t(s(z),null,{default:a(()=>[t(w,{to:""},{default:a(()=>[q]),_:1})]),_:1})]),_:1})])]),t(s(x),{"checked-row-keys":n.value,"onUpdate:checked-row-keys":l[0]||(l[0]=o=>n.value=o),"row-key":o=>o.id,data:_.value,size:"small",columns:f.value,bordered:!1,loading:d.value},null,8,["checked-row-keys","row-key","data","columns","loading"]),n.value.length?(k(),y("div",R,[u("div",Z,[u("div",{class:"toolbar-item",onClick:l[1]||(l[1]=o=>v(n.value))},[t(s(g),null,{trigger:a(()=>[t(s(b),null,{default:a(()=>[t(s(B))]),_:1})]),default:a(()=>[G]),_:1})]),u("div",{class:"toolbar-item",onClick:l[2]||(l[2]=o=>h(n.value))},[t(s(g),null,{trigger:a(()=>[t(s(b),null,{default:a(()=>[t(s(P))]),_:1})]),default:a(()=>[H]),_:1})])])])):S("",!0)])}}});export{W as default};
